<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browser Test Pages</title>
  <link rel="stylesheet" href="/tests/integration-browser/__assets__/common.css">
  <script type="importmap">
    {
      "imports": {
        "@huggingface/transformers": "/node_modules/@huggingface/transformers/dist/transformers.min.js",
        "onnxruntime-web": "/node_modules/onnxruntime-web/dist/ort.min.js"
      }
    }
  </script>
</head>
<body>
  <div id="root" class="panel">
    <h1>Browser Test Pages</h1>
    <p>Select an app. Click its name to open on a separate page, or click Preview to open below.</p>

    <input id="search" type="search" placeholder="Search apps..." aria-label="Search apps" />

    <div id="categories">
      <section class="category" data-category="llm">
        <h3>LLM</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-progress/index.html">llm-progress</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-progress/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-chat-history/index.html">llm-chat-history</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-chat-history/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-streaming/index.html">llm-streaming</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-streaming/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-completion/index.html">llm-completion</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-completion/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-parameters/index.html">llm-parameters</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-parameters/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-system-prompt/index.html">llm-system-prompt</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-system-prompt/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-empty-input/index.html">llm-empty-input</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-empty-input/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/llm-token-limits/index.html">llm-token-limits</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/llm-token-limits/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="stt">
        <h3>STT</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-transcribe/index.html">stt-transcribe</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-transcribe/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-from-url/index.html">stt-from-url</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-from-url/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-from-blob/index.html">stt-from-blob</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-from-blob/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-from-float32/index.html">stt-from-float32</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-from-float32/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-languages/index.html">stt-languages</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-languages/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/stt-timestamps/index.html">stt-timestamps</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/stt-timestamps/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="tts">
        <h3>TTS</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/tts-speak/index.html">tts-speak</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/tts-speak/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/tts-formats/index.html">tts-formats</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/tts-formats/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/tts-long-text/index.html">tts-long-text</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/tts-long-text/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/tts-special-chars/index.html">tts-special-chars</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/tts-special-chars/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="embeddings">
        <h3>Embeddings</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/embeddings-similarity/index.html">embeddings-similarity</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/embeddings-similarity/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/embedding-single/index.html">embedding-single</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/embedding-single/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/embedding-batch/index.html">embedding-batch</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/embedding-batch/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/embedding-find-similar/index.html">embedding-find-similar</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/embedding-find-similar/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/embedding-pooling/index.html">embedding-pooling</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/embedding-pooling/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="lifecycle">
        <h3>Lifecycle</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/lifecycle-warmup/index.html">lifecycle-warmup</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/lifecycle-warmup/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/lifecycle-warmup-all/index.html">lifecycle-warmup-all</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/lifecycle-warmup-all/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/lifecycle-unload/index.html">lifecycle-unload</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/lifecycle-unload/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/lifecycle-multiple-providers/index.html">lifecycle-multiple-providers</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/lifecycle-multiple-providers/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/lifecycle-dispose/index.html">lifecycle-dispose</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/lifecycle-dispose/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="events-config">
        <h3>Events & Config</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/events-progress/index.html">events-progress</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/events-progress/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/events-error/index.html">events-error</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/events-error/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/events-lifecycle/index.html">events-lifecycle</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/events-lifecycle/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/config-update/index.html">config-update</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/config-update/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/config-multiple-modalities/index.html">config-multiple-modalities</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/config-multiple-modalities/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="frameworks">
        <h3>Frameworks (React & Vue)</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/react-use-provider/index.html">react-use-provider</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/react-use-provider/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/react-use-chat/index.html">react-use-chat</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/react-use-chat/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/react-chat-app/index.html">react-chat-app</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/react-chat-app/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/react-lifecycle/index.html">react-lifecycle</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/react-lifecycle/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/vue-use-provider/index.html">vue-use-provider</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/vue-use-provider/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/vue-use-chat/index.html">vue-use-chat</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/vue-use-chat/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/vue-chat-app/index.html">vue-chat-app</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/vue-chat-app/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/vue-lifecycle/index.html">vue-lifecycle</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/vue-lifecycle/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="multimodal">
        <h3>Multimodal</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/multimodal-stt-llm/index.html">multimodal-stt-llm</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/multimodal-stt-llm/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/multimodal-llm-tts/index.html">multimodal-llm-tts</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/multimodal-llm-tts/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/multimodal-full/index.html">multimodal-full</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/multimodal-full/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="performance">
        <h3>Performance</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/performance-metrics/index.html">performance-metrics</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/performance-metrics/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/performance-concurrent/index.html">performance-concurrent</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/performance-concurrent/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/performance-cache/index.html">performance-cache</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/performance-cache/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="errors">
        <h3>Errors</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/error-invalid-config/index.html">error-invalid-config</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/error-invalid-config/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/error-model-not-found/index.html">error-model-not-found</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/error-model-not-found/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/error-network/index.html">error-network</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/error-network/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/error-invalid-input/index.html">error-invalid-input</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/error-invalid-input/index.html">Preview</button></div>
        </div>
      </section>

      <section class="category" data-category="workers-adapters">
        <h3>Workers & Adapters</h3>
        <div class="links">
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/worker-llm/index.html">worker-llm</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/worker-llm/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/adapter-openai/index.html">adapter-openai</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/adapter-openai/index.html">Preview</button></div>
          <div class="app-item"><a data-test-link href="/tests/integration-browser/__app__/adapter-langchain/index.html">adapter-langchain</a> <button class="btn preview" data-url="/tests/integration-browser/__app__/adapter-langchain/index.html">Preview</button></div>
        </div>
      </section>
    </div>

    <div class="viewer" id="viewer" style="margin-top:16px; display:none;">
      <div class="viewer__toolbar">
        <span data-testid="current-app" id="current-app">-</span>
        <button class="btn" id="open-new" type="button">Open in new tab</button>
        <button class="btn" id="reload-frame" type="button">Reload</button>
        <button class="btn" id="clear-frame" type="button">Close preview</button>
      </div>
      <iframe id="app-frame" title="App preview" src="" style="width:100%; height:600px; border:1px solid #e5e7eb; border-radius:8px; background:#fff"></iframe>
    </div>
  </div>
  <script type="module">
    window.testReady = true;

    const frame = document.getElementById('app-frame');
    const viewer = document.getElementById('viewer');
    const currentApp = document.getElementById('current-app');
    const openNew = document.getElementById('open-new');
    const reloadFrame = document.getElementById('reload-frame');
    const clearFrame = document.getElementById('clear-frame');
    const search = document.getElementById('search');
    const categories = document.getElementById('categories');

    function updateQuery(param, value) {
      const params = new URLSearchParams(location.search);
      if (value == null || value === '') params.delete(param); else params.set(param, value);
      const q = params.toString();
      history.replaceState(null, '', location.pathname + (q ? ('?' + q) : ''));
    }

    function loadApp(url) {
      if (!frame || !viewer) return;
      frame.src = url;
      viewer.style.display = 'block';
      if (currentApp) currentApp.textContent = url;
      if (openNew) openNew.onclick = () => window.open(url, '_blank');
      updateQuery('app', url);
    }

    categories?.addEventListener('click', (e) => {
      const target = e.target;
      // @ts-ignore
      if (target && target.matches && target.matches('button.preview')) {
        e.preventDefault();
        const url = target.getAttribute('data-url');
        if (url) loadApp(url);
      }
    });

    clearFrame?.addEventListener('click', () => {
      if (frame) frame.src = '';
      if (viewer) viewer.style.display = 'none';
      if (currentApp) currentApp.textContent = '-';
      updateQuery('app', null);
    });

    reloadFrame?.addEventListener('click', () => {
      // @ts-ignore
      frame?.contentWindow?.location?.reload();
    });

    function filterApps(query) {
      const q = (query || '').toLowerCase();
      const sections = categories?.querySelectorAll('section.category') || [];
      sections.forEach((sec) => {
        const items = sec.querySelectorAll('.app-item');
        let visibleCount = 0;
        items.forEach((item) => {
          const link = item.querySelector('a');
          const text = (link?.textContent || '').toLowerCase();
          const show = !q || text.includes(q);
          // @ts-ignore
          item.style.display = show ? '' : 'none';
          if (show) visibleCount++;
        });
        // @ts-ignore
        sec.style.display = visibleCount > 0 ? '' : 'none';
      });
    }

    search?.addEventListener('input', () => filterApps(search.value));

    const urlParams = new URLSearchParams(location.search);
    const appUrl = urlParams.get('app');
    if (appUrl) loadApp(appUrl);
  </script>
</body>
</html>


